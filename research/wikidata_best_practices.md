# Wikidata 搜索最佳实践与关键字生成策略研究

## 1. 研究背景

本研究旨在探索 Wikidata API 的最佳搜索实践，最终目标是形成一套指导 AI 模型生成高效、准确的 Wikidata 搜索关键字的提示词（Prompt）策略。

## 2. 核心发现

通过对 Wikidata API 文档和社区实践的研究，我们总结出以下核心机制：

- **双API结构**:
  - `wbsearchentities`: 用于通过文本标签（Label）和别名（Alias）进行模糊搜索，返回候选实体列表。这是关键字策略优化的主要对象。
  - `wbgetentities` / `wbgetclaims`: 用于在获得精确实体ID（如 Q42）后，获取该实体的详细数据（声明、描述等）。

- **搜索依赖于标签和别名**: `wbsearchentities` 的效果直接取决于目标实体是否拥有丰富、准确的标签和别名。

- **语言参数是关键**: 搜索和获取数据时，指定语言（`language`）参数至关重要，它决定了返回结果的语言。可以同时指定多种语言。

- **描述用于消歧**: 返回结果中的实体描述（Description）是区分同名实体（如“苹果公司”与“苹果水果”）的关键信息。

- **ID查询最高效**: 如果能预先确定实体ID，直接查询是避免模糊性和歧义的最佳途径。

---
*（后续将在此文件上继续补充“关键字生成黄金法则”和“Prompt设计草案”）*
## 3. 关键字生成黄金法则

基于以上发现，我们总结出以下四条核心策略，用于指导 AI 生成更优的搜索关键字。

### 法则一：优先使用“实体全称”
- **场景**: 对话中提到明确的实体，如人名、地名、组织、作品名。
- **策略**: 生成最标准、最完整的官方名称作为关键字，忽略昵称或简称。
- **示例**:
  - *用户*: “华仔最近有什么新电影？” -> *AI生成关键字*: `["刘德华"]`
  - *用户*: “冰与火之歌讲的啥？” -> *AI生成关键字*: `["冰与火之歌"]`

### 法则二：采用“中英双语”策略
- **场景**: 提到专业术语、科学概念，或在不同语言中名称差异较大的实体。
- **策略**: 同时生成中文和英文两种关键字，以最大化召回率和准确性。
- **示例**:
  - *用户*: “什么是量子纠缠？” -> *AI生成关键字*: `["量子纠缠", "Quantum entanglement"]`
  - *用户*: “给我讲讲图灵” -> *AI生成关键字*: `["艾伦·图灵", "Alan Turing"]`

### 法则三：善用“ID直达”
- **场景**: 对话中明确或暗示了某个 Wikidata 属性（Property）或实体ID。
- **策略**: 直接生成对应的属性ID（P开头）或实体ID（Q开头）。这是最高效、最准确的方式。
- **示例**:
  - *用户*: “爱因斯坦的生日是哪天？” -> *AI识别*: “生日” -> “出生日期 (P569)” -> *AI生成关键字*: `["P569"]`
  - *用户*: “道格拉斯·亚当斯（Q42）的作品有哪些？” -> *AI生成关键字*: `["Q42"]`

### 法则四：通过“上下文消歧”
- **场景**: 一个词有多种含义时（例如，“苹果”）。
- **策略**: 结合对话的上下文，生成更具体的、带有消歧义信息的关键字，避免模糊搜索。
- **示例**:
  - *用户*: “我想买一部苹果手机” -> *AI生成关键字*: `["苹果公司"]` 或 `["iPhone"]`
  - *用户*: “中国的首都是哪里？” -> *AI生成关键字*: `["中华人民共和国首都"]`

---
*（后续将基于这些法则设计指导性Prompt）*